import * as cdk from 'aws-cdk-lib';
import * as lambda from 'aws-cdk-lib/aws-lambda';
import { CfnOutput } from 'aws-cdk-lib/aws-cloudformation';

const app = new cdk.App();
const stack = new cdk.Stack(app, 'LambdaStack');

// Lambdaを作成する
const myLambda = new lambda.Function(stack, 'MyLambda', {
  runtime: lambda.Runtime.NODEJS_14_X,
  handler: 'index.handler',
  code: lambda.Code.fromAsset('lambda'),
});

// LambdaをCfnOutput()でエクスポートする
new CfnOutput(stack, 'ExportedLambdaArn', {
  value: myLambda.functionArn,
  exportName: 'MyLambdaArn',
});

// Fn.importValueでインポートする
const importedValue = cdk.Fn.importValue('MyImportedValue');
// importedValueを利用する場所に応じて処理を記述する

app.synth();












$ cdk deploy --all
C:\Users\testuser\repo\test\t5\node_modules\ts-node\src\index.ts:859
    return new TSError(diagnosticText, diagnosticCodes, diagnostics);
           ^
TSError: ⨯ Unable to compile TypeScript:
bin/t5.ts:3:22 - error TS2307: Cannot find module 'aws-cdk-lib/aws-cloudformation-lib' or its corresponding type declarations.
    at Object.require.extensions.<computed> [as .ts] (C:\Users\testuser\repo\test\t5\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Function.Module._load (node:internal/modules/cjs/loader:958:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12) {
  diagnosticCodes: [ 2305 ]
}

Subprocess exited with error 1

testuser MINGW64 ~/repo/test/t5 (master)


